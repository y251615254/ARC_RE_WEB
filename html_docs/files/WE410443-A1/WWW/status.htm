<!DOCTYPE html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"><![endif]-->
<!--[if IE 7]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if IE 8]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--><html lang="en" class="gt-ie8"><!--<![endif]-->
<!--[if lt IE 10]><meta http-equiv="X-UA-Compatible" content="IE=edge" /><![endif]-->
<head>
<title></title>
<meta http-equiv="Content-Type" content="text/html; charset=">
<link rel="stylesheet" type="text/css" media="screen" href="css/c_voda_main.css">
<link rel="stylesheet" type="text/css" media="all" href="css/arctransform.css">
<!--[if lt IE 9]>
<link rel="stylesheet" type="text/css" media="screen" href="css/ie.css">
<![endif]-->
<script language="javascript">
var LangJ=["status"];var CGIs=["status","toplogy_info_and_led"]; //

</script>
<script language="javascript">var G_top=1;</script>
<script language="javascript" src="js/global.js"></script>
<script language="javascript" src="js/routine.js"></script>
<script language="JavaScript" src="js/init_data.js"></script>
<script type="text/javascript" src="js/jquery-1.8.3.min.js"></script>
<script type="text/javascript" src="js/jquery.arctransform.js"></script>
<script language="JavaScript">

/* test for offline start. // in toplogy_info_and_led.js,code annotation line008,009

var toplogy_info={ "nodes": [ 
{ "hw_ver": "01", "sw_ver": "v1.01.12 build06", "fw_ver": "v1.01.12 build06", "sn": "+088269+1709004945", "device_mac": "E0:51:63:AC:97:4E", 
"device_name": "12345", "device_id": "E0:51:63:AC:97:4D", "device_ip": "192.168.1.3", "device_netmask": "255.255.255.0", "eth_mac": "E0:51:63:AC:97:50", 
"bssid_2g": "E0:51:63:AC:97:4E", "essid_2g": "BTWholeHome-8XN", "bssid_5g": "E0:51:63:AC:97:4F", "essid_5g": "BTWholeHome-8XN", "parent_id": "NULL",
 "child_id": "E0:51:63:AC:97:7D,E0:51:63:AC:76:9D", "child_num": "2", "sta_num": "1", "connect_type": "Ether", "connect_rssi": "6", "model_name": "WE410443-A1", 
 "product_id": "WE410443-A1", "node_lvid": "1", "uptime": "63121", "cpuU": "0", "cpuS": "13", "cpuI": "87", "memT": "122168", "memF": "57528", "memU": "64640",
 "connected_role": "configured_master", "connected_rootap": "1", "linkrate": "1000Mbps", "linkmode": "0" }, { "hw_ver": "01", "sw_ver": "v1.01.12 build06",
 "fw_ver": "v1.01.12 build06", "sn": "+088269+1709004957", "device_mac": "E0:51:63:AC:97:7E", "device_name": "12345 ", "device_id": "E0:51:63:AC:97:7D",
 "device_ip": "192.168.1.4", "device_netmask": "255.255.255.0", "eth_mac": "E0:51:63:AC:97:80", "bssid_2g": "E0:51:63:AC:97:7E", "essid_2g": "BTWholeHome-8XN", 
 "bssid_5g": "E0:51:63:AC:97:7F", "essid_5g": "BTWholeHome-8XN", "parent_id": "E0:51:63:AC:97:4D", "child_id": "NULL", "child_num": "0", "sta_num": "1",
 "connect_type": "5G", "connect_rssi": "632", "model_name": "WE410443-A1", "product_id": "WE410443-A1", "node_lvid": "17", "uptime": "63084", "cpuU": "0", 
 "cpuS": "4", "cpuI": "96", "memT": "122168", "memF": "60172", "memU": "61996", "connected_role": "configured_slave", "connected_rootap": "0", "linkrate": "1733Mbps",
 "linkmode": "0" }, { "hw_ver": "01", "sw_ver": "v1.01.12 build06", "fw_ver": "v1.01.12 build06", "sn": "+088269+1709002853", "device_mac": "E0:51:63:AC:76:9E", 
 "device_name": "yuiopop", "device_id": "E0:51:63:AC:76:9D", "device_ip": "192.168.1.6", "device_netmask": "255.255.255.0", "eth_mac": "E0:51:63:AC:76:A0", 
 "bssid_2g": "E0:51:63:AC:76:9E", "essid_2g": "BTWholeHome-8XN", "bssid_5g": "E0:51:63:AC:76:9F", "essid_5g": "BTWholeHome-8XN", "parent_id": "E0:51:63:AC:97:4D", 
 "child_id": "NULL", "child_num": "0", "sta_num": "0", "connect_type": "5G", "connect_rssi": "620", "model_name": "WE410443-A1", "product_id": "WE410443-A1", 
 "node_lvid": "33", "uptime": "63084", "cpuU": "2", "cpuS": "8", "cpuI": "90", "memT": "122168", "memF": "60484", "memU": "61684", "connected_role": "configured_slave",
 "connected_rootap": "0", "linkrate": "1733Mbps", "linkmode": "0" } ], "cksum": "13e3722bd4c381265db8f4254e5d085" };
 
var station_info={"stations":[{"station_mac":"78:7B:8A:E7:3F:31","station_name":"iPhone-1000","alias_name":"czyiphon8","station_ip":"192.168.1.7",
"parent_id":"E0:51:63:AC:97:4D","connect_type":"5G","link_rate":"6Mbps","link_rate_max":"0Mbps","mode":"8","signal_strength":"-87","signal_strength_max":"0",
"signal_strength_min":"-87","pid":"NULL","online":"1","last_connect":"1512527597","ipv6_ip":"","note":"0","as":"1","ldur":"0","lddr":"0","rt":"0","bs":"26609054",
"br":"8959160","txc":"26979","rxc":"26691","es":"0","rtc":"0","frc":"0","rc":"0","mrc":"0"},{"station_mac":"D4:61:9D:74:65:C3","station_name":"ArciPhone7",
"alias_name":"arciphone7p","station_ip":"192.168.1.8","parent_id":"E0:51:63:AC:97:7D","connect_type":"5G","link_rate":"866Mbps","link_rate_max":"0Mbps","mode":"8",
"signal_strength":"-41","signal_strength_max":"0","signal_strength_min":"-48","pid":"NULL","online":"1","last_connect":"1512527593","ipv6_ip":"","note":"0","as":"1",
"ldur":"0","lddr":"0","rt":"0","bs":"665413101","br":"14092984","txc":"469127","rxc":"249792","es":"0","rtc":"0","frc":"0","rc":"0","mrc":"0"},
{"station_mac":"9C:2A:70:5E:88:25","station_name":"test-PC","alias_name":"NULL","station_ip":"NULL","parent_id":"00:00:00:00:00:00","connect_type":"2.4G",
"link_rate":"0Mbps","link_rate_max":"0Mbps","mode":"0","signal_strength":"0","signal_strength_max":"0","signal_strength_min":"0","pid":"NULL","online":"0",
"last_connect":"1512526994","ipv6_ip":"","note":"0","as":"0","ldur":"0","lddr":"0","rt":"0","bs":"0","br":"0","txc":"0","rxc":"0","es":"0","rtc":"0","frc":"0","rc":"0",
"mrc":"0"},{"station_mac":"00:1B:77:D7:4D:E0","station_name":"WIN-20060110TWA","alias_name":"NULL","station_ip":"NULL","parent_id":"00:00:00:00:00:00",
"connect_type":"5G","link_rate":"0Mbps","link_rate_max":"0Mbps","mode":"0","signal_strength":"0","signal_strength_max":"0","signal_strength_min":"0","pid":"NULL",
"online":"0","last_connect":"1512467834","ipv6_ip":"","note":"0","as":"0","ldur":"0","lddr":"0","rt":"0","bs":"0","br":"0","txc":"0","rxc":"0","es":"0","rtc":"0",
"frc":"0","rc":"0","mrc":"0"},{"station_mac":"5C:F9:DD:59:34:37","station_name":"NULL","alias_name":"NULL","station_ip":"NULL","parent_id":"00:00:00:00:00:00",
"connect_type":"unknown","link_rate":"0Mbps","link_rate_max":"0Mbps","mode":"0","signal_strength":"0","signal_strength_max":"0","signal_strength_min":"0",
"pid":"NULL","online":"0","last_connect":"1512526880","ipv6_ip":"","note":"0","as":"0","ldur":"0","lddr":"0","rt":"0","bs":"0","br":"0","txc":"0","rxc":"0","es":"0",
"rtc":"0","frc":"0","rc":"0","mrc":"0"},{"station_mac":"28:5A:EB:70:54:7C","station_name":"12345678","alias_name":"NULL","station_ip":"NULL",
"parent_id":"00:00:00:00:00:00","connect_type":"5G","link_rate":"0Mbps","link_rate_max":"0Mbps","mode":"0","signal_strength":"0","signal_strength_max":"0",
"signal_strength_min":"0","pid":"NULL","online":"0","last_connect":"1512524773","ipv6_ip":"","note":"0","as":"0","ldur":"0","lddr":"0","rt":"0","bs":"0","br":"0",
"txc":"0","rxc":"0","es":"0","rtc":"0","frc":"0","rc":"0","mrc":"0"},{"station_mac":"28:ED:6A:E9:AB:FB","station_name":"linbode-iPhone","alias_name":"NULL",
"station_ip":"NULL","parent_id":"00:00:00:00:00:00","connect_type":"5G","link_rate":"0Mbps","link_rate_max":"0Mbps","mode":"0","signal_strength":"0",
"signal_strength_max":"0","signal_strength_min":"0","pid":"NULL","online":"0","last_connect":"1512472079","ipv6_ip":"","note":"0","as":"0","ldur":"0",
"lddr":"0","rt":"0","bs":"0","br":"0","txc":"0","rxc":"0","es":"0","rtc":"0","frc":"0","rc":"0","mrc":"0"}]};



var system_now_time="08/01/2003 00:01:42 am";
var runtime_code_version='1.00.25 (Apr 20 2010 13:48:18)'; //'1.00.10 (Dec 22 2009 17:59:32)';
var boot_code_version='V1.02';
var hardware_version='0A';
var hardware_serial_no='120942H1100006';
var hardware_model="MGL7016AW-22-ZZ";
var hardware_Manufacturer="demo";
var runtime_date="demo";
var system_uptime="demo";
var cgi_ntp_conn =parseInt('1');
addCfg("wireless_enable", "1966180000", "1");
addCfg("wireless_enable_5g", "1966180001", "1");
var system_now_time="08/01/2003 00:01:42 am";
addCfg("dhcp_client_num",123,"1");
var lan_mac_addr_list = [['00-25-2C-A1-FE-2B'],null];
var wan_mac_addr_list=[['88-25-2C-A1-FE-2B'],['88-25-2C-A1-FE-2C'],['88-25-2C-A1-FE-2D'],null];
var wlan_mac_addr_list = [['00-25-2C-A1-FE-2B'],null];
var runtime_code_version="v1.00.00";
var boot_code_version="0.06";
var adsl_code_version="3.4.4.10.0.1A";
var hardware_version="01";
var hardware_serial_no="J042034491";
/*test for offline end*/

/*new station info */
var station_info={"stations":[]};
function new_station_info(){		
	for (var j=0,i=0;j < station_info_old.stations.length;j++) 		
		{			
		if(station_info_old.stations[j].online==0)			
			continue;							
		var row={};								
		row.station_mac = station_info_old.stations[j].station_mac;			
		row.station_name = station_info_old.stations[j].station_name;			
		row.alias_name = station_info_old.stations[j].alias_name;			
		row.station_ip = station_info_old.stations[j].station_ip;			
		row.parent_id = station_info_old.stations[j].parent_id;			
		row.connect_type = station_info_old.stations[j].connect_type;			
		row.link_rate = station_info_old.stations[j].link_rate;			
		row.signal_strength = station_info_old.stations[j].signal_strength;			
		row.profile_id = station_info_old.stations[j].profile_id;			
		row.last_connect = station_info_old.stations[j].last_connect;							
		station_info.stations.push(row);			
		i++;								
		}
}
/*new station info end*/

var rootap_connect = 1;
var apList= new Array;
var stationList= new Array;
var C_LV=0;
var C_ID=1;
var C_HN=2;
var C_CN=3;
var C_SN=4;
var C_PCN=5;
var C_PID=6;
var C_APINFO=7;
var C_PS=8;
var C_TY=9;




var C_PID_MAC=10;
var C_DEV_MAC=11;



var S_PD=0;	//ap id that station connect with
var S_IP=1;	//station ip
var S_NA=2;	//station name
var big_pic_num=9;


//Add for fix topology page, it is ugly & stay as long as 1-2 second sometime bug ...start
var staus_info="";
var status_tmp_str=new Array;
var status_sta_tmp_str=new Array;
var status_sta_pic_num;
var status_node_num=new Array;
//Add for fix topology page, it is ugly & stay as long as 1-2 second sometime bug ...end

var sta_type=new Array;//sta_type for Ether or wireless 
var sta_type_num=0; //aplist's num isnot the topology's num ,so create this ,and when aplist add ,this add 

//when create  apList,sta_type also create a status the station types 
function station_type(i,parent_device_id){		
	var n=0;
	sta_type[i]=0;
	for (var j=0;j < station_info.stations.length;j++) 
	{					
		if(station_info.stations[j].parent_id == parent_device_id)
		{					
			n++;
			if(station_info.stations[j].connect_type=="Ether")
			{
				if(n==1)
				sta_type[i]=sta_type[i]|8; //the first is Ether 
								
				if(n==2)
				sta_type[i]=sta_type[i]|4; //second
								
				if(n==3)
				sta_type[i]=sta_type[i]|2;
								
				if(n>3)
				sta_type[i]=sta_type[i]|1;
																	
			}
							
		}
	}
}


function showInformationStatus(){
	var tmp_str;
	var i;

	setIdVal("model_name", hardware_model);
	setIdVal("runtime_code_version", runtime_code_version);
	setIdVal("boot_code_version", boot_code_version);
	setIdVal("hw_Manufacturer", hardware_Manufacturer);
	setIdVal("runtime_date", runtime_date);

	tmp_str = lan_mac_addr_list[0]+'<br>';
	setIdVal("lan_mac_addr", tmp_str);

	tmp_str=wlan_mac_addr_list[0]+'<br>';
	setIdVal("wlan_mac_addr", tmp_str);

	setIdVal("hardware_version",hardware_version);
	setIdVal("serial_number",hardware_serial_no);
	setIdVal("system_uptime",system_uptime);
	
}

function checknodeList(device_id, length, lv, child_num, count_id)
{
	var num=0;
	var parent_id=0;
	var station_for_apid=0;
	var connect_ps;
	parent_id = count_id;
	for (var i=0;i < length;i++) {
		if(toplogy_info.nodes[i].parent_id == device_id){
			num ++;
			//connect_ps = parseInt(toplogy_info.nodes[i].connect_rssi,  10);
			//console.log("connect_ps:"+connect_ps);
			//console.log('connect_rssi:'+toplogy_info.nodes[i].connect_rssi[0]);

			if(toplogy_info.nodes[i].connect_rssi[0] == '3')//orange
			{
				connect_ps = "Poor Connection";
			}
			else if(toplogy_info.nodes[i].connect_rssi[0] == '2')//red
			{
				connect_ps = "No Connection"; 
			}
			else												//green
			{
				connect_ps = "Good Connection";
			}
			
//			apList.push(lv + "," + num + ","+ toplogy_info.nodes[i].device_name + "," + toplogy_info.nodes[i].child_num + ',' + toplogy_info.nodes[i].sta_num + ',' + child_num + ',' + parent_id + ',' + toplogy_info.nodes[i].device_mac + ',' + connect_ps + ',' + toplogy_info.nodes[i].connect_type);			
			apList.push(lv + "," + num + ","+ toplogy_info.nodes[i].device_name + "," + toplogy_info.nodes[i].child_num + ',' + toplogy_info.nodes[i].sta_num + ',' + child_num + ',' + parent_id + ',' + toplogy_info.nodes[i].device_mac + ',' + connect_ps + ',' + toplogy_info.nodes[i].connect_type + ',' + toplogy_info.nodes[i].parent_id + ',' + toplogy_info.nodes[i].device_id);			

			station_for_apid = apList.length - 1;
			sta_type_num++;
			station_type(sta_type_num,toplogy_info.nodes[i].device_id);
			//alert(sta_type_num+":"+toplogy_info.nodes[i].device_name );
			
			//console.log('apList2:'+apList);
			//console.log('child_num:'+toplogy_info.nodes[i].child_num);
			count_id ++;
			if(toplogy_info.nodes[i].sta_num != '0')
			{
				for (var j=0;j < station_info.stations.length;j++) 
				{
					//console.log('parent_id:'+station_info.stations[j].parent_id);
					//console.log('device_id:'+toplogy_info.nodes[i].device_id);
					if(station_info.stations[j].parent_id == toplogy_info.nodes[i].device_id)
					{					
						stationList.push(station_for_apid + ',' + station_info.stations[j].station_ip +  ',' + station_info.stations[j].station_name);
						//console.log('stationList2:'+stationList);
					}
				}
				//console.log('stationList1:'+stationList);
			}
			if(toplogy_info.nodes[i].child_num != '0')
				checknodeList(toplogy_info.nodes[i].device_id, length, lv+1, toplogy_info.nodes[i].child_num, count_id);
			if(num >= child_num)
				break;
		}
	}

}
function checkList()
{
	var count_id=0;
	var station_for_apid=0;
	var connect_ps;
	for (var j=0;j < station_info.stations.length;j++) 
	{
		if(station_info.stations[j].station_ip == "NULL")
			station_info.stations[j].station_ip = "Unknown";
		if(station_info.stations[j].station_name == "NULL")
			station_info.stations[j].station_name = "Unknown";		
	}	
	for (var i=0;i < toplogy_info.nodes.length;i++) 
	{
		if(toplogy_info.nodes[i].parent_id == "NULL")
		{
			rootap_connect = parseInt(toplogy_info.nodes[i].connected_rootap,  10);
		    //connect_ps = parseInt(toplogy_info.nodes[i].connect_rssi,  10);
			//console.log('connect_rssi:'+toplogy_info.nodes[i].connect_rssi[0]);
			//var ddd = toplogy_info.nodes[i].connect_rssi[0];
			//toplogy_info.nodes[i].connect_rssi[0] = "2";

			if(toplogy_info.nodes[i].connect_rssi[0] == '3')//orange
			{
				connect_ps = "Poor Connection";
			}
			else if(toplogy_info.nodes[i].connect_rssi[0] == '2')//red
			{
				connect_ps = "No Connection"; 
			}
			else												//green
			{
				connect_ps = "Good Connection";
			}
			
			apList.push('0' + ',' + '1' + ',' + toplogy_info.nodes[i].device_name + "," + toplogy_info.nodes[i].child_num + ',' + toplogy_info.nodes[i].sta_num + ',' + toplogy_info.nodes[i].child_num+ ',' + count_id + ',' + toplogy_info.nodes[i].device_mac + ',' + connect_ps +  ',' + toplogy_info.nodes[i].connect_type+ ',' + toplogy_info.nodes[i].parent_id + ',' + toplogy_info.nodes[i].device_id);	
			station_for_apid = apList.length - 1;
			
			station_type(sta_type_num,toplogy_info.nodes[i].device_id);
			//alert(toplogy_info.nodes[i].device_name);
			//console.log('apList1:'+apList);
			if(toplogy_info.nodes[i].sta_num != '0')
			{
				for (var j=0;j < station_info.stations.length;j++) 
				{
					if(station_info.stations[j].parent_id == toplogy_info.nodes[i].device_id)
						stationList.push(station_for_apid + ',' + station_info.stations[j].station_ip +  ',' + station_info.stations[j].station_name);
				}
			}
			if(toplogy_info.nodes[i].child_num != '0')
				checknodeList(toplogy_info.nodes[i].device_id, toplogy_info.nodes.length, 1, toplogy_info.nodes[i].child_num, count_id);
			
			count_id ++;
			break;
		}
	}
	//alert(apList);
}

var sta_tmp_str=new Array;
function show_station_info(c_id, c_sn, is_more, sta_total_num)
{
	var sta_num = 0;
	var pass_sta_num = 0;
	var push_msg='';
	for(var j=0;j < stationList.length; j++)
	{
		var sta=stationList[j].split(",");
		
		//console.log('c_id:'+c_id);
		//console.log('sta[S_PD]:'+sta[S_PD]);
		if(sta[S_PD] == c_id)
		{
			if(is_more && pass_sta_num < 2)
			{
				pass_sta_num ++;
				continue;
			}
			if(is_more == 0 || sta_num < 1)
				if(is_more == 0 && c_sn == 1)
					push_msg = "<br /><br /><br /><br /><br />" + push_msg + sta[S_NA] + "<br />" + sta[S_IP];
				else
					push_msg = push_msg + sta[S_NA] + "<br />" + sta[S_IP];
			else
				push_msg = push_msg + (sta_total_num - 3) +  " more...";
			if(c_sn == 2 && sta_num == 0)
				push_msg = push_msg + "<br /><br /><br /><br />";
			sta_num ++;
		}
		//console.log('sta_num:'+sta_num);
		//console.log('c_sn:'+c_sn);
		if(sta_num >= c_sn || sta_num >= 2)
			break;
	}
	sta_tmp_str.push(push_msg);
	//console.log('over');
	//console.log('sta_tmp_str:'+sta_tmp_str);
}

function showList(ap_list_name)
{
  	var m=new Array;
	var ap_id_name='';
	var ap_num_id_name='';
	var sta_id_name='';
	var ap_image_name='';
	var tmp_str=new Array;
	var sta_pic_num=0;
	var sta_num=0;
	
	//alert("showList");
	for(var i=0;i < apList.length; i++)
	{
		var s=apList[i].split(",");
		
		ap_id_name = "ap"+i;
		ap_num_id_name='num' + i;
		ap_image_name = "apimg"+i;
		//alert(ap_id_name);
		//alert("s[C_LV]:" + s[C_LV]);
		if(s[C_LV] == 0)
		{
			
			m.push('<p>');
			m.push("<span class='ap_node' id='rootap'><img src='images/rootap_80.png' border='0'></span>");
			if(rootap_connect == 1)// set root ap link img 1->green  
				m.push("<span class=''><img src='images/net_l_r_d_80.png' border='0'></span>");//class="eptype"
			else
				m.push("<span class=''><img src='images/net_l_r_80_red.png' border='0'></span>");//class="eptype_red"
			
			if(apList.length < big_pic_num)
			{
				if(rootap_connect != 1)
				{
					s[C_PS] = "No Connection";
					m.push("<span class='ap_node' id='"+ap_image_name+"'><img src='images/ap_80_red.png' border='0'><span id='"+ap_id_name+"' class='node_info'></span></span>");
				}
				else if(s[C_PS] == "Good Connection")
					m.push("<span class='ap_node' id='"+ap_image_name+"'><img src='images/ap_80.png' border='0'><span id='"+ap_id_name+"' class='node_info'></span></span>");
				else if(s[C_PS] == "Poor Connection")
					m.push("<span class='ap_node' id='"+ap_image_name+"'><img src='images/ap_80_orange.png' border='0'><span id='"+ap_id_name+"' class='node_info'></span></span>");
			}
			else
				m.push("<span class='ap_node' id='"+ap_image_name+"'><img src='images/ap.png' border='0'><span id='"+ap_id_name+"' class='node_info'></span></span>");


			if(s[C_SN] > 0)
				//alert(s[C_SN] );
				if(apList.length < big_pic_num){						
					sta_id_name = "sta"+sta_pic_num;
					sta_pic_num ++;
					if(s[C_SN] < 3)
					{			
						if((s[C_SN]==1)&&(sta_type[i]&8))
						m.push("<span><img src='images/ethernet"+s[C_SN]+"_80.png' border='0'><span id='"+ap_num_id_name+"' class='node_num'></span><span id='"+sta_id_name+"' class='wifi" +s[C_SN]+"_node_info'></span></span>");
						else if(s[C_SN]==1)
						m.push("<span><img src='images/phone"+s[C_SN]+"_80.png' border='0'><span id='"+ap_num_id_name+"' class='node_num'></span><span id='"+sta_id_name+"' class='wifi" +s[C_SN]+"_node_info'></span></span>");							
						else if((s[C_SN]==2)&&(sta_type[i]&8)&&(sta_type[i]&4))
						m.push("<span><img src='images/ethernet"+s[C_SN]+"_80.png' border='0'><span id='"+ap_num_id_name+"' class='node_num'></span><span id='"+sta_id_name+"' class='wifi" +s[C_SN]+"_node_info'></span></span>");
						else if((s[C_SN]==2)&&sta_type[i]&8)
						m.push("<span><img src='images/ethernet_wireless"+s[C_SN]+"_80.png' border='0'><span id='"+ap_num_id_name+"' class='node_num'></span><span id='"+sta_id_name+"' class='wifi" +s[C_SN]+"_node_info'></span></span>");
						else if((s[C_SN]==2)&&sta_type[i]&4)
						m.push("<span><img src='images/wireless_ethernet"+s[C_SN]+"_80.png' border='0'><span id='"+ap_num_id_name+"' class='node_num'></span><span id='"+sta_id_name+"' class='wifi" +s[C_SN]+"_node_info'></span></span>");
						else
						m.push("<span><img src='images/phone"+s[C_SN]+"_80.png' border='0'><span id='"+ap_num_id_name+"' class='node_num'></span><span id='"+sta_id_name+"' class='wifi" +s[C_SN]+"_node_info'></span></span>");
						var num_push =  ap_num_id_name + '@' + s[C_SN];
						status_node_num.push(num_push);
						/*sta_num = 1;
						for(var j=0;j < stationList.length; j++)
						{
							var sta=stationList[j].split(",");
							
							if(sta[S_PD] == s[C_ID])
								sta_tmp_str.push(sta[S_NA] + "<br />" + s[S_IP]);
							sta_num ++;
							if(sta_num >= s[C_SN])
								break;
						}*/
						show_station_info( i, s[C_SN], 0, s[C_SN]);
					}
					else
					{
						if((sta_type[i]&8)&&(sta_type[i]&4))
						m.push("<span><img src='images/ethernet23_80.png' border='0'><span id='"+ap_num_id_name+"' class='node_num'></span><span id='"+sta_id_name+"' class='wifi2_node_info'></span></span>");
						else if(sta_type[i]&8)
						m.push("<span><img src='images/ethernet_wireless23_80.png' border='0'><span id='"+ap_num_id_name+"' class='node_num'></span><span id='"+sta_id_name+"' class='wifi2_node_info'></span></span>");
						else if(sta_type[i]&4)
						m.push("<span><img src='images/wireless_ethernet23_80.png' border='0'><span id='"+ap_num_id_name+"' class='node_num'></span><span id='"+sta_id_name+"' class='wifi2_node_info'></span></span>");
						else 
						m.push("<span><img src='images/phone23_80.png' border='0'><span id='"+ap_num_id_name+"' class='node_num'></span><span id='"+sta_id_name+"' class='wifi2_node_info'></span></span>");
						var num_push =  ap_num_id_name + '@' + s[C_SN];
						status_node_num.push(num_push);
						/*sta_num = 1;
						for(var j=0;j < stationList.length; j++)
						{
							var sta=stationList[j].split(",");
							if(sta[S_PD] == s[C_ID])
								sta_tmp_str.push(sta[S_NA] + "<br />" + s[S_IP]);
							sta_num ++;
							if(sta_num >= 2)
								break;
						}*/
						show_station_info(i, 2, 0, s[C_SN]);
					}
				}
				else
				{
						m.push("<span id='"+ap_num_id_name+"' class='node_num'></span><span><a href='status_lan_device.htm'><img src='images/wificlient.png' border='0'></a></span>");
						var num_push =  ap_num_id_name + '@' + s[C_SN];
						status_node_num.push(num_push);
				}
			m.push('</p>');
			if(s[C_TY] == "")
			{
				tmp_str.push(s[C_HN] + "<br />" + "Ethernet");
			}			
			else
			{
				//Add  change these references from "2.4G" to "2.4GHz", "Ether" to "Ethernet" and "5G" to "5GHz".  ... start
				if(s[C_TY] == "Ether")
				{
					s[C_TY] = "Ethernet";
				}
				if(s[C_TY] == "2.4G")
				{
					s[C_TY] = "2.4GHz";
				}
				if(s[C_TY] == "5G")
				{
					s[C_TY] = "5GHz";
				}
				//Add  change these references from "2.4G" to "2.4GHz", "Ether" to "Ethernet" and "5G" to "5GHz".  ... end
		
/*		
				//Add  change these   Good/Poor/No Connection to german... start
				var langselect=getCfg("languages");//0 english 
				if(langselect == 4)
				{
					if(s[C_PS] == "Good Connection")
					{
						s[C_PS] = "Gute Verbindung";
					}
					if(s[C_PS] == "No Connection")
					{
						s[C_PS] = "Keine Verbindung";
					}
					if(s[C_PS] == "Poor Connection")
					{
						s[C_PS] = "Schlechte Verbindung";
					}
				}
				//Add  change these   Good/Poor/No Connection to german... end
*/		
				
				tmp_str.push(s[C_HN] + "<br />" + s[C_TY] + "<br />" + s[C_PS]);
			}
				
			
			if(s[C_SN] >= 3)
			{
				var star_node_id;
				if(s[C_SN] == 3)
					star_node_id = 1;
				else
					star_node_id = 2;
				//console.log('s[C_LV]0:'+s[C_LV]);
				m.push("<p>"); 
				m.push("<span><img src='images/space_80.png' border='0'></span>");
				m.push("<span><img src='images/space_80.png' border='0'></span>");
				if(s[C_CN] > 0)
					m.push("<span class='eptype_middleNode'></span>");
				else
					m.push("<span><img src='images/space_80.png' border='0'></span>");
				if(apList.length < big_pic_num)
				{
					sta_id_name = "sta"+sta_pic_num;
					sta_pic_num ++;									
					if(s[C_SN] > 3){						
						if((sta_type[i]&2)&&(sta_type[i]&1))
						m.push("<span><img src='images/ethernet4_80.png' border='0'><a href='status_lan_device.htm'><span id='"+sta_id_name+"' class='wifi" + star_node_id +"_node_info'></span></a></span>");
						else if(sta_type[i]&2)
						m.push("<span><img src='images/ethernet_wireless4_80.png' border='0'><a href='status_lan_device.htm'><span id='"+sta_id_name+"' class='wifi" + star_node_id +"_node_info'></span></a></span>");
						else if(sta_type[i]&1)
						m.push("<span><img src='images/wireless_ethernet4_80.png' border='0'><a href='status_lan_device.htm'><span id='"+sta_id_name+"' class='wifi" + star_node_id +"_node_info'></span></a></span>");
						else 
						m.push("<span><img src='images/phone4_80.png' border='0'><a href='status_lan_device.htm'><span id='"+sta_id_name+"' class='wifi" + star_node_id +"_node_info'></span></a></span>");										
						}
					else
						{
						if(sta_type[i]&2)
						m.push("<span><img src='images/ethernet3_80.png' border='0'><span id='"+sta_id_name+"' class='wifi" + star_node_id +"_node_info'></span></span>");
						else 
						m.push("<span><img src='images/phone3_80.png' border='0'><span id='"+sta_id_name+"' class='wifi" + star_node_id +"_node_info'></span></span>");						
						}
					/*sta_num = 1;
					for(var j=0;j < stationList.length; j++)
					{
						var sta=stationList[j].split(",");
						
						if(sta[S_PD] == s[C_ID])
							sta_tmp_str.push(sta[S_NA] + "<br />" + s[S_IP]);
						sta_num ++;
						if(sta_num >= star_node_id)
							break;
					}*/
					show_station_info(i, star_node_id, 1, s[C_SN]);
				}
				else
				{
					m.push("<span id='"+ap_num_id_name+"' class='node_num'></span><span><a href='status_lan_device.htm'><img src='images/wificlient.png' border='0'></a></span>");
					var num_push =  ap_num_id_name + '@' + s[C_SN];
					status_node_num.push(num_push);
				}
				m.push('</p>');

			}
		}
		else if(s[C_LV] == 1)
		{
			m.push("<p>"); 
			m.push("<span><img src='images/space_80.png' border='0'></span>");
			m.push("<span><img src='images/space_80.png' border='0'></span>");
			if(s[C_ID] == s[C_PCN])
			{ 
				if(s[C_PS] == "Good Connection")//green
					m.push("<span class='eptype_last'></span>");
				else if(s[C_PS] == "No Connection")			//red 2
					m.push("<span class='eptype_last_red'></span>");
				else if(s[C_PS] == "Poor Connection")	//orange  3
					m.push("<span class='eptype_last_orange'></span>");
			}
			else
			{
				if(s[C_PS] == "Good Connection")//green
					m.push("<span class='eptype_middle'></span>");
				else if(s[C_PS] == "No Connection")			//red
					m.push("<span class='eptype_middle_red'></span>");
				else if(s[C_PS] == "Poor Connection")	//orange
					m.push("<span class='eptype_middle_orange'></span>");
			}
			if(apList.length < big_pic_num)
			{
				if(s[C_PS] == "Good Connection")//green
					m.push("<span class='ap_node' id='"+ap_image_name+"'><img src='images/ap_80.png' border='0'><span id='"+ap_id_name+"' class='node_info'></span></span>");
				else if(s[C_PS] == "Poor Connection")//orange
					m.push("<span class='ap_node' id='"+ap_image_name+"'><img src='images/ap_80_orange.png' border='0'><span id='"+ap_id_name+"' class='node_info'></span></span>");
				else if(s[C_PS] == "No Connection")//red
					m.push("<span class='ap_node' id='"+ap_image_name+"'><img src='images/ap_80_red.png' border='0'><span id='"+ap_id_name+"' class='node_info'></span></span>");
			}	
			else
				m.push("<span class='ap_node' id='"+ap_image_name+"'><img src='images/ap.png' border='0'><span id='"+ap_id_name+"' class='node_info'></span></span>")			
			
			if(s[C_SN] > 0)
				if(apList.length < big_pic_num)
				{
					sta_id_name = "sta"+sta_pic_num;
					sta_pic_num ++;
					if(s[C_SN] < 3)
					{	
				
						
						
						if((s[C_SN]==1)&&(sta_type[i]&8))
						m.push("<span><img src='images/ethernet"+s[C_SN]+"_80.png' border='0'><span id='"+ap_num_id_name+"' class='node_num'></span><span id='"+sta_id_name+"' class='wifi" +s[C_SN]+"_node_info'></span></span>");
						else if(s[C_SN]==1)
						m.push("<span><img src='images/phone"+s[C_SN]+"_80.png' border='0'><span id='"+ap_num_id_name+"' class='node_num'></span><span id='"+sta_id_name+"' class='wifi" +s[C_SN]+"_node_info'></span></span>");							
						else if((s[C_SN]==2)&&(sta_type[i]&8)&&(sta_type[i]&4))
						m.push("<span><img src='images/ethernet"+s[C_SN]+"_80.png' border='0'><span id='"+ap_num_id_name+"' class='node_num'></span><span id='"+sta_id_name+"' class='wifi" +s[C_SN]+"_node_info'></span></span>");
						else if((s[C_SN]==2)&&sta_type[i]&8)
						m.push("<span><img src='images/ethernet_wireless"+s[C_SN]+"_80.png' border='0'><span id='"+ap_num_id_name+"' class='node_num'></span><span id='"+sta_id_name+"' class='wifi" +s[C_SN]+"_node_info'></span></span>");
						else if((s[C_SN]==2)&&sta_type[i]&4)
						m.push("<span><img src='images/wireless_ethernet"+s[C_SN]+"_80.png' border='0'><span id='"+ap_num_id_name+"' class='node_num'></span><span id='"+sta_id_name+"' class='wifi" +s[C_SN]+"_node_info'></span></span>");
						else
						m.push("<span><img src='images/phone"+s[C_SN]+"_80.png' border='0'><span id='"+ap_num_id_name+"' class='node_num'></span><span id='"+sta_id_name+"' class='wifi" +s[C_SN]+"_node_info'></span></span>");
						show_station_info(i, s[C_SN], 0, s[C_SN]);
						var num_push =  ap_num_id_name + '@' + s[C_SN];
						status_node_num.push(num_push);
					}
					else
					{
					
						if((sta_type[i]&8)&&(sta_type[i]&4))
						m.push("<span><img src='images/ethernet23_80.png' border='0'><span id='"+ap_num_id_name+"' class='node_num'></span><span id='"+sta_id_name+"' class='wifi2_node_info'></span></span>");
						else if(sta_type[i]&8)
						m.push("<span><img src='images/ethernet_wireless23_80.png' border='0'><span id='"+ap_num_id_name+"' class='node_num'></span><span id='"+sta_id_name+"' class='wifi2_node_info'></span></span>");
						else if(sta_type[i]&4)
						m.push("<span><img src='images/wireless_ethernet23_80.png' border='0'><span id='"+ap_num_id_name+"' class='node_num'></span><span id='"+sta_id_name+"' class='wifi2_node_info'></span></span>");
						else 
						m.push("<span><img src='images/phone23_80.png' border='0'><span id='"+ap_num_id_name+"' class='node_num'></span><span id='"+sta_id_name+"' class='wifi2_node_info'></span></span>");
						
	
						show_station_info(i, 2, 0, s[C_SN]);
						var num_push =  ap_num_id_name + '@' + s[C_SN];
						status_node_num.push(num_push);
					}
				}
				else
				{
					m.push("<span id='"+ap_num_id_name+"' class='node_num'></span><span><a href='status_lan_device.htm'><img src='images/wificlient.png' border='0'></a></span>");
					var num_push =  ap_num_id_name + '@' + s[C_SN];
					status_node_num.push(num_push);
				}
			m.push('</p>');
			
			//Add  change these references from "2.4G" to "2.4GHz", "Ether" to "Ethernet" and "5G" to "5GHz".  ... start
			if(s[C_TY] == "Ether")
			{
				s[C_TY] = "Ethernet";
			}
			if(s[C_TY] == "2.4G")
			{
				s[C_TY] = "2.4GHz";
			}
			if(s[C_TY] == "5G")
			{
				s[C_TY] = "5GHz";
			}
			//Add  change these references from "2.4G" to "2.4GHz", "Ether" to "Ethernet" and "5G" to "5GHz".  ... end
	
/*	
			//Add  change these   Good/Poor/No Connection to german... start
			var langselect=getCfg("languages");//0 english 
			if(langselect == 4)
			{
				if(s[C_PS] == "Good Connection")
				{
					s[C_PS] = "Gute Verbindung";
				}
				if(s[C_PS] == "No Connection")
				{
					s[C_PS] = "Keine Verbindung";
				}
				if(s[C_PS] == "Poor Connection")
				{
					s[C_PS] = "Schlechte Verbindung";
				}
			}
			//Add  change these   Good/Poor/No Connection to german... end			
*/			
			tmp_str.push(s[C_HN] + "<br />" + s[C_TY] + "<br />" + s[C_PS]);
			if(s[C_SN] >= 3)
			{
				var p=apList[s[C_PID]].split(",");	//parent
				var star_node_id;

				if(s[C_SN] == 3)
					star_node_id = 1;
				else
					star_node_id = 2;
					
				//console.log('s[C_LV]1:'+s[C_LV]);
				m.push("<p>"); 
				m.push("<span><img src='images/space_80.png' border='0'></span>");
				m.push("<span><img src='images/space_80.png' border='0'></span>");
				if(s[C_ID] < p[C_CN])
					m.push("<span class='eptype_middleNode'></span>");
				else
					m.push("<span><img src='images/space_80.png' border='0'></span>");
				if(s[C_CN] > 0)
					m.push("<span class='eptype_middleNode'></span>");
				else
					m.push("<span><img src='images/space_80.png' border='0'></span>");
				if(apList.length < big_pic_num)
				{
					sta_id_name = "sta"+sta_pic_num;
					sta_pic_num ++;
					if(s[C_SN] > 3){
						if((sta_type[i]&2)&&(sta_type[i]&1))
						m.push("<span><img src='images/ethernet4_80.png' border='0'><a href='status_lan_device.htm'><span id='"+sta_id_name+"' class='wifi" + star_node_id +"_node_info'></span></a></span>");
						else if(sta_type[i]&2)
						m.push("<span><img src='images/ethernet_wireless4_80.png' border='0'><a href='status_lan_device.htm'><span id='"+sta_id_name+"' class='wifi" + star_node_id +"_node_info'></span></a></span>");
						else if(sta_type[i]&1)
						m.push("<span><img src='images/wireless_ethernet4_80.png' border='0'><a href='status_lan_device.htm'><span id='"+sta_id_name+"' class='wifi" + star_node_id +"_node_info'></span></a></span>");
						else 
						m.push("<span><img src='images/phone4_80.png' border='0'><a href='status_lan_device.htm'><span id='"+sta_id_name+"' class='wifi" + star_node_id +"_node_info'></span></a></span>");	
						}
					else{
						if(sta_type[i]&2)
						m.push("<span><img src='images/ethernet3_80.png' border='0'><span id='"+sta_id_name+"' class='wifi" + star_node_id +"_node_info'></span></span>");
						else 
						m.push("<span><img src='images/phone3_80.png' border='0'><span id='"+sta_id_name+"' class='wifi" + star_node_id +"_node_info'></span></span>");	
						}
					show_station_info( i, star_node_id, 1, s[C_SN]);
				}
				else
				{
					m.push("<span id='"+ap_num_id_name+"' class='node_num'></span><span><a href='status_lan_device.htm'><img src='images/wificlient.png' border='0'></a></span>");
					var num_push =  ap_num_id_name + '@' + s[C_SN];
					status_node_num.push(num_push);
				}
				m.push('</p>');

			}
		}
		else  if(s[C_LV] > 1)
		{		
			//console.log(s);
			var pid=s[C_PID];//this  wrong pid  // 
			var push_msg="";

			//get correct pid!    
			//there are wrong when git pid or p_id so must get correct parent id or parent 's parent id
			var c_parent_id_mac = s[C_PID_MAC];
			for(var ii=0; ii < apList.length; ii++)
			{
				var tmp = apList[ii].split(",");
				if(c_parent_id_mac == tmp[C_DEV_MAC])
				{
					var gg = s[2];
					pid = ii;
					break;
				}
				
			}
			//get correct pid end

			
			for(var k = 0;k < (s[C_LV] - 1);k++) 
			{	
			
						
			var p=apList[pid].split(",");	//parent
			var p_id=p[C_PID];//this  wrong p_id
			
			//get correct p_id 
			var c_parent_id_mac = p[C_PID_MAC];
			for(var ii=0; ii < apList.length; ii++)
			{
				var tmp = apList[ii].split(",");
				if(c_parent_id_mac == tmp[C_DEV_MAC])
				{
					var gg = s[2];
					p_id = ii;
					break;
				}
				
			}
			// get correct p_id end
											
				var pp=apList[p_id].split(","); //parent->parent	
				
				if(p[C_ID] < pp[C_CN])
				{
					push_msg = "<span class='eptype_middleNode'></span>" + push_msg;					
					if(pp[C_LV] == 0)
						push_msg = "<p><span><img src='images/space_80.png' border='0'></span><span><img src='images/space_80.png' border='0'></span>" + push_msg; // class='middleNode'
				}
				else
				{
					if(apList.length < big_pic_num )
						push_msg = "<span><img src='images/space_80.png' border='0'></span>" + push_msg;
					else
						push_msg = "<span><img src='images/space_60.png' border='0'></span>" + push_msg;
					if(pp[C_LV] == 0)
						push_msg = "<p><span><img src='images/space_80.png' border='0'></span><span><img src='images/space_80.png' border='0'></span>" + push_msg; // class='lastNode'
				}																
				pid=p[C_PID];	//this  wrong pid
				
				//get correct p_id 
				var c_parent_id_mac = p[C_PID_MAC];
				for(var ii=0; ii < apList.length; ii++)
				{
				var tmp = apList[ii].split(",");
				if(c_parent_id_mac == tmp[C_DEV_MAC])
				{
					var gg = s[2];
					pid = ii;
					break;
				}
				
				}
				// get correct pid end		
				
			}
			m.push(push_msg);
			if(s[C_ID] == s[C_PCN])
			{ 

				if(s[C_PS] == "Good Connection")//green
					m.push("<span class='eptype_last'></span>");
				else if(s[C_PS] == "No Connection")//red
					m.push("<span class='eptype_last_red'></span>");
				else if(s[C_PS] == "Poor Connection")//orange
					m.push("<span class='eptype_last_orange'></span>");
			}
			else
			{
				if(s[C_PS] == "Good Connection")//green
					m.push("<span class='eptype_middle'></span>");
				else if(s[C_PS] == "No Connection")//red
					m.push("<span class='eptype_middle_red'></span>");
				else if(s[C_PS] == "Poor Connection")//orange
					m.push("<span class='eptype_middle_orange'></span>");
			}
			
			if(apList.length < big_pic_num)
			{
				if(s[C_PS] == "Good Connection")//green
					m.push("<span class='ap_node' id='"+ap_image_name+"'><img src='images/ap_80.png' border='0'><span id='"+ap_id_name+"' class='node_info'></span></span>");
				else if(s[C_PS] == "Poor Connection")//orange
					m.push("<span class='ap_node' id='"+ap_image_name+"'><img src='images/ap_80_orange.png' border='0'><span id='"+ap_id_name+"' class='node_info'></span></span>");
				else if(s[C_PS] == "No Connection")//red
					m.push("<span class='ap_node' id='"+ap_image_name+"'><img src='images/ap_80_red.png' border='0'><span id='"+ap_id_name+"' class='node_info'></span></span>");
			}		
			else	
				m.push("<span class='ap_node' id='"+ap_image_name+"'><img src='images/ap.png' border='0'><span id='"+ap_id_name+"' class='node_info'></span></span>")

			if(s[C_SN] > 0)
				if(apList.length < big_pic_num)
				{
					sta_id_name = "sta"+sta_pic_num;
					sta_pic_num ++;
					if(s[C_SN] < 3)
					{
						if((s[C_SN]==1)&&(sta_type[i]&8))
						m.push("<span><img src='images/ethernet"+s[C_SN]+"_80.png' border='0'><span id='"+ap_num_id_name+"' class='node_num'></span><span id='"+sta_id_name+"' class='wifi" +s[C_SN]+"_node_info'></span></span>");
						else if(s[C_SN]==1)
						m.push("<span><img src='images/phone"+s[C_SN]+"_80.png' border='0'><span id='"+ap_num_id_name+"' class='node_num'></span><span id='"+sta_id_name+"' class='wifi" +s[C_SN]+"_node_info'></span></span>");							
						else if((s[C_SN]==2)&&(sta_type[i]&8)&&(sta_type[i]&4))
						m.push("<span><img src='images/ethernet"+s[C_SN]+"_80.png' border='0'><span id='"+ap_num_id_name+"' class='node_num'></span><span id='"+sta_id_name+"' class='wifi" +s[C_SN]+"_node_info'></span></span>");
						else if((s[C_SN]==2)&&sta_type[i]&8)
						m.push("<span><img src='images/ethernet_wireless"+s[C_SN]+"_80.png' border='0'><span id='"+ap_num_id_name+"' class='node_num'></span><span id='"+sta_id_name+"' class='wifi" +s[C_SN]+"_node_info'></span></span>");
						else if((s[C_SN]==2)&&sta_type[i]&4)
						m.push("<span><img src='images/wireless_ethernet"+s[C_SN]+"_80.png' border='0'><span id='"+ap_num_id_name+"' class='node_num'></span><span id='"+sta_id_name+"' class='wifi" +s[C_SN]+"_node_info'></span></span>");
						else
						m.push("<span><img src='images/phone"+s[C_SN]+"_80.png' border='0'><span id='"+ap_num_id_name+"' class='node_num'></span><span id='"+sta_id_name+"' class='wifi" +s[C_SN]+"_node_info'></span></span>");
																	
						show_station_info( i, s[C_SN], 0, s[C_SN]);
						var num_push =  ap_num_id_name + '@' + s[C_SN];
					    status_node_num.push(num_push);
					}
					else
					{
						if((sta_type[i]&8)&&(sta_type[i]&4))
						m.push("<span><img src='images/ethernet23_80.png' border='0'><span id='"+ap_num_id_name+"' class='node_num'></span><span id='"+sta_id_name+"' class='wifi2_node_info'></span></span>");
						else if(sta_type[i]&8)
						m.push("<span><img src='images/ethernet_wireless23_80.png' border='0'><span id='"+ap_num_id_name+"' class='node_num'></span><span id='"+sta_id_name+"' class='wifi2_node_info'></span></span>");
						else if(sta_type[i]&4)
						m.push("<span><img src='images/wireless_ethernet23_80.png' border='0'><span id='"+ap_num_id_name+"' class='node_num'></span><span id='"+sta_id_name+"' class='wifi2_node_info'></span></span>");
						else 
						m.push("<span><img src='images/phone23_80.png' border='0'><span id='"+ap_num_id_name+"' class='node_num'></span><span id='"+sta_id_name+"' class='wifi2_node_info'></span></span>");	
						
						show_station_info(i, 2, 0, s[C_SN]);
						var num_push =  ap_num_id_name + '@' + s[C_SN];
						status_node_num.push(num_push);
					}
				}
				else
				{
					m.push("<span id='"+ap_num_id_name+"' class='node_num'></span><span><a href='status_lan_device.htm'><img src='images/wificlient.png' border='0'></a></span>");
					var num_push =  ap_num_id_name + '@' + s[C_SN];
					status_node_num.push(num_push);
				}
			m.push('</p>');

			//Add  change these references from "2.4G" to "2.4GHz", "Ether" to "Ethernet" and "5G" to "5GHz".  ... start
			if(s[C_TY] == "Ether")
			{
				s[C_TY] = "Ethernet";
			}
			if(s[C_TY] == "2.4G")
			{
				s[C_TY] = "2.4GHz";
			}
			if(s[C_TY] == "5G")
			{
				s[C_TY] = "5GHz";
			}
			//Add  change these references from "2.4G" to "2.4GHz", "Ether" to "Ethernet" and "5G" to "5GHz".  ... end


/*
			//Add  change these   Good/Poor/No Connection to german... start
			var langselect=getCfg("languages");//0 english 
			if(langselect == 4)
			{
				if(s[C_PS] == "Good Connection")
				{
					s[C_PS] = "Gute Verbindung";
				}
				if(s[C_PS] == "No Connection")
				{
					s[C_PS] = "Keine Verbindung";
				}
				if(s[C_PS] == "Poor Connection")
				{
					s[C_PS] = "Schlechte Verbindung";
				}
			}
			//Add  change these   Good/Poor/No Connection to german... end
*/	
			
			tmp_str.push(s[C_HN] + "<br />" + s[C_TY] + "<br />" + s[C_PS]);
			
			var push_flag=new Array;  
			
			if(s[C_SN] >= 3)
			{
				var pid=s[C_PID];	
				var star_node_id;
				if(s[C_SN] == 3)
					star_node_id = 1;
				else
					star_node_id = 2;
				//console.log('s[C_LV]2:'+s[C_LV]);
				m.push("<p>"); 
				m.push("<span><img src='images/space_80.png' border='0'></span>");
				m.push("<span><img src='images/space_80.png' border='0'></span>");
				
				for(var k = 0;k < s[C_LV];k++) //da yu 3 de shi hou push fan le. suo yi xin jian yi ge shu zu 
				{
					var p=apList[pid].split(",");	//parent
					
					
					if(k==0){
						if(s[C_ID] < p[C_CN])
							push_flag[k]='1';
						else
							push_flag[k]='0';						
					}
					else{
						if(p_old[C_ID] < p[C_CN])
							push_flag[k]='1';
						else
							push_flag[k]='0';						
						}																
					pid=p[C_PID];	
					p_old=p;										
				}
				
				k=k-1;
				for(;k>=0;k--){
					if(push_flag[k]=='1')
						m.push("<span class='eptype_middleNode'></span>");								
					else
						m.push("<span><img src='images/space_80.png' border='0'></span>");
					
				}
				if(s[C_CN] > 0)
					m.push("<span class='eptype_middleNode'></span>");
				else
					m.push("<span><img src='images/space_80.png' border='0'></span>");
				if(apList.length < big_pic_num)
				{
					sta_id_name = "sta"+sta_pic_num;
					sta_pic_num ++;
					if(s[C_SN] > 3)
						{
						if((sta_type[i]&2)&&(sta_type[i]&1))
						m.push("<span><img src='images/ethernet4_80.png' border='0'><a href='status_lan_device.htm'><span id='"+sta_id_name+"' class='wifi" + star_node_id +"_node_info'></span></a></span>");
						else if(sta_type[i]&2)
						m.push("<span><img src='images/ethernet_wireless4_80.png' border='0'><a href='status_lan_device.htm'><span id='"+sta_id_name+"' class='wifi" + star_node_id +"_node_info'></span></a></span>");
						else if(sta_type[i]&1)
						m.push("<span><img src='images/wireless_ethernet4_80.png' border='0'><a href='status_lan_device.htm'><span id='"+sta_id_name+"' class='wifi" + star_node_id +"_node_info'></span></a></span>");
						else 
						m.push("<span><img src='images/phone4_80.png' border='0'><a href='status_lan_device.htm'><span id='"+sta_id_name+"' class='wifi" + star_node_id +"_node_info'></span></a></span>");	
						}
					else
						{
						if(sta_type[i]&2)
						m.push("<span><img src='images/ethernet3_80.png' border='0'><span id='"+sta_id_name+"' class='wifi" + star_node_id +"_node_info'></span></span>");
						else 
						m.push("<span><img src='images/phone3_80.png' border='0'><span id='"+sta_id_name+"' class='wifi" + star_node_id +"_node_info'></span></span>");	
						}

					show_station_info( i, star_node_id, 1, s[C_SN]);
				}
				else
				{
					m.push("<span id='"+ap_num_id_name+"' class='node_num'></span><span><a href='status_lan_device.htm'><img src='images/wificlient.png' border='0'></a></span>");
					var num_push =  ap_num_id_name + '@' + s[C_SN];
					status_node_num.push(num_push);
				}
				m.push('</p>');

			}
		}
		
	}
	
	$(ap_list_name).html(m.join(''));
	
	staus_info = apList;
	status_sta_pic_num = sta_pic_num;
	for(var i=0;i < apList.length; i++)
	{
		ap_id_name = "ap"+i;
		//alert("tmp_str[i]:"+tmp_str[i]);
		status_tmp_str.push(tmp_str[i]); 
		//$I(ap_id_name).innerHTML=tmp_str[i];
	}
	for(var i=0;i < sta_pic_num; i++)
	{
		sta_id_name = "sta"+i;
		status_sta_tmp_str.push(sta_tmp_str[i]);
		//$I(sta_id_name).innerHTML=sta_tmp_str[i];
	}
	//$('.node_info').hide();

	
}	

/*
Fix topology page, it is ugly & stay as long as 1-2 second sometime bug......start
leo_20161021
*/
//worry about once refresh can not be every time OK,so refresh 3 times
var times_flag = 0;
function set_status_info_times()   
{  
	if(times_flag == 4)
	{
		return; 
	}
	if(times_flag >= 1)	//if times_flag=0 ,the first times is not delay 250ms, the function will execute immediately
	{
		set_status_info(); 
	}
	
	//alert(times_flag);
	times_flag++;
	window.setTimeout("set_status_info_times()",300); 
    //set_status_info_times is refers to itself, delay recursive call themselves,300 call time interval,unit millisecond
}  


//var timer = window.setTimeout("set_status_info()",100);
function set_status_info()
{
	var ap_id_name='';
	var sta_id_name='';
	var sta_num_id_name='';
	//alert(staus_info);
	//alert(status_tmp_str);
	//alert(status_sta_tmp_str); 
	//alert(status_node_num); 
	for(var i=0;i < staus_info.length; i++)
	{
		ap_id_name = "ap"+i;
		//alert(ap_id_name);
		//alert(status_tmp_str[i]);

		//Add  change these   Good/Poor/No Connection to german... start
		var connect_info = status_tmp_str[i];
		var langselect=getCfg("languages");//0 english 
		if(langselect == 4)
		{
			//alert(connect_info);
			if(connect_info.indexOf("Good")  != -1)
			{
				status_tmp_str[i] = connect_info.replace("Good Connection", "Gute Verbindung");
			}
			if(connect_info.indexOf("No")  != -1)
			{
				status_tmp_str[i] = connect_info.replace("No Connection", "Keine Verbindung");
			}
			if(connect_info.indexOf("Poor")  != -1)
			{
				status_tmp_str[i] = connect_info.replace("Poor Connection", "Schlechte Verbindung");
			}
			//alert(status_tmp_str[i]);

		}
		//Add  change these   Good/Poor/No Connection to german... end
 
		$I(ap_id_name).innerHTML=status_tmp_str[i];
	}
	
	for(var i=0;i < status_sta_pic_num; i++)
	{
		sta_id_name = "sta"+i;
		$I(sta_id_name).innerHTML=status_sta_tmp_str[i];
	}

	for(var i=0;i < status_node_num.length; i++)
	{
		var tmp = status_node_num[i];
		var tmp_num = tmp.split('@');
		var tmp_num_id = tmp_num[0];
		var tmp_num_value = tmp_num[1];
		
		//var fff = document.getElementById(tmp_num_id).innerHTML;
		document.getElementById(tmp_num_id).innerHTML = tmp_num_value;
	}

}
//Fix topology page, it is ugly & stay as long as 1-2 second sometime bug......end


//Fix sometimes the value(toplogy_info->sta_num) is wrong...start 
function check_toplogy_info_sta_num_value_error()
{
	//alert("toplogy_info.length:" + toplogy_info.nodes.length);
	for(var i = 0; i <  toplogy_info.nodes.length; i++)
	{
		var toplogy_info_device = toplogy_info.nodes[i].device_id.toUpperCase();
		var tmp=0;
		for(var j = 0; j <  station_info.stations.length; j++)
		{
			var station_info_parent = station_info.stations[j].parent_id.toUpperCase();
			if(toplogy_info_device == station_info_parent)
			{
				tmp++;
			}
		}
		toplogy_info.nodes[i].sta_num = tmp;
	}
}
//Fix sometimes the value(toplogy_info->sta_num) is wrong...end 




/*END_OPT*/
//reset_toplogy_info_client_name(it will change station_info[jason] date)...start 
function get_re_device_name_by_mac(device_name, mac_address)
{
	var mac_name_array = new Array();
	
	for(var i=0; i<64; i++)
	{
		var clinet_name=getCfg("arc_clinet_name"+(i));
		var clinet_mac=getCfg("arc_clinet_mac"+(i));
		mac_name_array[i] = clinet_mac + "@" + clinet_name;
		if(clinet_mac.toUpperCase() == mac_address.toUpperCase())
		{
			if(clinet_name != "NULL")
			{
				return clinet_name;
			}
		}
	}
	
	return device_name;

}
function refreshfun() {
       location.href = "status.htm";
       return false;
}

//reset_toplogy_info_client_name(it will change station_info[jason] date)...start 
function reset_toplogy_info_client_name()
{
	//alert("toplogy_info.length:" + toplogy_info.nodes.length);
	for(var i = 0; i <  station_info.stations.length; i++)
	{
		var toplogy_clinet_device_mac = station_info.stations[i].station_mac;
		var toplogy_clinet_device_name = station_info.stations[i].station_name;

		var clinet_name = station_info.stations[i].alias_name; 
		if(clinet_name == "" || clinet_name == "NULL")
		{
			clinet_name=station_info.stations[i].station_name;
		}
		station_info.stations[i].station_name = clinet_name;
	}
}
//reset_toplogy_info_client_name(it will change station_info[jason] date)...end

//===================================
// init
//===================================
function init(){
	var f=document.tF0;
	new_station_info();
	check_toplogy_info_sta_num_value_error();//Fix sometimes the value(toplogy_info->sta_num) is wrong,so put in the first.
	reset_toplogy_info_client_name();
	showInformationStatus();
	// put before showMenu()
	top.G_menu_title=getLangM(400000);
	checkList();
	if(apList.length < big_pic_num)
		showList("#ap_list1");
	else
		showList("#ap_list");

	set_status_info_times();//Fix topology,when load the img and text,display dislocation
/*
	$(".ap_node").mouseout(function(){
		$('#ap'+$(this).attr('id').slice(5)).hide();
		})
		.mouseover(function(){
		$('#ap'+$(this).attr('id').slice(5)).css('display','');
		});
*/
	
	ShowMenu();
	reSetHelpUrl("StatusID"); 
}


</script>
</head>
<body bgcolor="#ffffff" text="#000000" leftmargin="0" topmargin="0" marginwidth="0" marginheight="0" onLoad="pre_init()">
<!-- Page left-->
<script>ShowPageMenu();</script>
<p style="margin-left:10px"><font id="104" class="arcFont4"></font></p>
<!-- Page left-->
<!-- main page-->
<form name="tF0" action="/cgi-bin/statusprocess.exe" method="post" target="OUTfrm">
<div class='hwintftable' id="ap_list">
</div>
<div class='hwintftable_large' id="ap_list1">
</div>
</form>
<form>
<br>
<br>
<table width="98%" border="0" cellspacing="0" cellpadding="0">
       <tr>
               
			<td align="center">
                      <input type="button" class="green" onClick="refreshfun()" name="refresh" id="100003">&nbsp;
              </td>
       </tr>
</table>
</form>
<!-- Page tail-->
<script>ShowPageTail();</script>
<!-- Page Tail-->
<!--REAL <% IMG_TOKEN(r); %> REAL-->
<!--DEMO--><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7MTkzMTI4MjAz" border=0><!--END_DEMO-->
</body>
</html>


